---
description: High-level architectural overview and technical constraints for geminiweb-go.
globs:
  - "**/*"
alwaysApply: true
---

# GeminiWeb-Go Project Overview

## Context & Architecture
`geminiweb-go` is a high-performance CLI and TUI application that interacts with the private Google Gemini Web API. It prioritizes browser emulation to access features not available in public SDKs (Gems, file uploads, etc.).

### Core Architecture
- **Entry Points**: `cmd/geminiweb` (main binary) and `internal/commands` (Cobra CLI).
- **Core Logic**: `internal/api` contains the `GeminiClient` which handles reverse-engineered RPC calls.
- **UI Layer**: `internal/tui` uses the **Bubble Tea (MVU)** pattern for an interactive terminal experience.
- **Infrastructure**: `internal/browser` (cookie extraction), `internal/history` (JSON persistence), and `internal/config`.

### Critical Technical Constraints
- **TLS Fingerprinting**: All outgoing requests MUST use `github.com/bogdanfinn/tls-client` to mimic a Chrome browser (currently Chrome 133). Standard `net/http` will trigger bot detection.
- **Authentication**: Rely on `__Secure-1PSID` and `__Secure-1PSIDTS` cookies. The client uses a dynamic `SNlM0e` token extracted from the Gemini web page.
- **Data Persistence**: Config and history are stored in `~/.config/geminiweb/` (or OS equivalent).

### Key Directory Map
- `internal/api/`: API client, session management, and response parsing.
- `internal/tui/`: Bubble Tea models, viewports, and interactive components.
- `internal/models/`: Shared data structures and API constants.
- `internal/history/`: Local conversation storage logic.
- `internal/render/`: Markdown rendering using Glamour.